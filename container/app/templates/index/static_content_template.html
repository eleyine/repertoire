<div class="row">
  <div class="col-12">
    <h4 class="title">Navigation</h4>

    <div  id="accordion">
  {% for node in protocols recursive %}
    {% if node.is_child_leaf %}
          {% if node.leaf_type == 'str' or node.leaf_type == 'bool' %}
          <p><span class='form-label'>{{node.label}}</span>:
            {{node.authorized_leaf_content}}
          </p>
          {% elif node.leaf_type == 'list' %}
            <p class="form-title list"> {{node.label}} </p>
            <ul>
            {% for list in node.children %}
              <li>
              {% for child in list.children %}
                <span class='form-label'>{{child.label}}</span>: {{child.authorized_leaf_content}} &nbsp;
              {% endfor %}
              </li>
            {% endfor %}
            </ul>
          {% elif node.leaf_type == 'dict' %}
            <p class='form-title'>{{node.label}}</p>
            <ul>
            {% for child in node.children %}
                <li><span class='form-label'>{{child.label}}</span>: {{child.authorized_leaf_content}}</li>
            {% endfor %}
            </ul>
          {% else %}
            <p>Houston, we have a problem. {{node.leaf_type}}</p>
          {% endif %}
    {% else %}
       <div class="card {% if node.is_root_leaf %}root-leaf{% endif %}" id="{{node.parent.id}}">
         <div class="card-header">
            <p>
              <a data-toggle="collapse" data-target="#{{node.id}}" class="accordion-link collapsed">
                {% if node.label == " " %}Contenu Vide{% else %}{{node.label}} {% endif %}
              </a>
              {% if node.is_root_leaf and current_user.is_admin %}
               <a class="edit-btn btn btn-light btn-sm float-right" href="{{ url_for('main.edit_protocols', id = node.id) }}">Modifier</a>
              {% endif %}
            </p>
          </div>
          <div id="{{node.id}}" data-parent="#{% if node.level == 1 %}accordion{% else %}{{node.parent.id}}{% endif %}" class="collapse">
            <div class="card-body">
              {{loop(node.children)}}
            </div>
          </div><!-- / end panel-collapse -->
        </div> <!-- / end panel-group -->
    {% endif %}
  {% endfor %}
</div>
<div class="filler-div"></div>
  </div>
</div>
